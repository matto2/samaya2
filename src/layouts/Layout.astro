---
import "../styles/global.css";
import Footer from "../components/Footer.astro";
import Nav from "../components/Nav.astro";

import "@fontsource/kaushan-script";
import "@fontsource/poppins";
import "@fontsource/poppins/300.css";
import "@fontsource/poppins/400.css";
import "@fontsource/poppins/500.css";
// Supports weights 200-900
import "@fontsource-variable/nunito";
import "@fontsource-variable/mulish";

// Get the current URL path
const { title } = Astro.props;
const currentPage = Astro.url.pathname; // This gives the current route (e.g., "/about")
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <style type="text/css">
      .active_link
      {
        border-bottom: 2px solid var(--brand-accent);
        color: var(--brand-accent);
        font-weight: 800;
      }
    </style>
    <script type="text/javascript">
    // RJN
    const links = document.querySelectorAll("nav > div > a");
    if(links !== null)
    {
      Array.from(links).forEach((link) =>
      {
        link.classList.remove("active_link");
        const link_href = link.getAttribute("href").toString().toLowerCase();
        const paths = window.location.href.split("/");
        const path = paths[paths.length - 1].trim().toLowerCase();
        console.log(link_href);
        console.log("Path: " + path)
      });      
    }
  </script>
  </head>
  <body class="bg-stone-50 relative">
    <!-- Background Gradient (Full Width, 400px Height, Fades to Transparent at Bottom) -->
    <div class="absolute top-0 right-0 w-full h-screen">
      <div class="flex
      flex-col
      min-h-screen
      relative">
        <!-- Main Content -->
        <main class="flex-grow p-4 max-w-7xl mx-auto w-full relative">
          <Nav currentPage={currentPage} />
          <!-- Pass the current page -->
          <h2></h2>
          <slot />
        </main>

        <!-- Footer remains inside the flex container -->
        <Footer />
      </div>

      <script src="/src/scripts/fslightbox.js"></script>
      <!-- Cal element-click embed code -->
      <script type="text/javascript">
        (function (C, A, L) {
          let p = function (a, ar) {
            a.q.push(ar);
          };
          let d = C.document;
          C.Cal =
            C.Cal ||
            function () {
              let cal = C.Cal;
              let ar = arguments;
              if (!cal.loaded) {
                cal.ns = {};
                cal.q = cal.q || [];
                d.head.appendChild(d.createElement("script")).src = A;
                cal.loaded = true;
              }
              if (ar[0] === L) {
                const api = function () {
                  p(api, arguments);
                };
                const namespace = ar[1];
                api.q = api.q || [];
                if (typeof namespace === "string") {
                  cal.ns[namespace] = cal.ns[namespace] || api;
                  p(cal.ns[namespace], ar);
                  p(cal, ["initNamespace", namespace]);
                } else p(cal, ar);
                return;
              }
              p(cal, ar);
            };
        })(window, "https://app.cal.com/embed/embed.js", "init");

        Cal("init", "1-hour-session", { origin: "https://cal.com" });

        Cal.ns["1-hour-session"]("ui", {
          theme: "light",
          cssVarsPerTheme: { light: { "cal-brand": "#86198F" } },
          hideEventTypeDetails: false,
          layout: "month_view",
        });
      </script>
    </div>
  </body>
</html>
